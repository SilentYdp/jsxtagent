# 江苏信托智能体平台 - React开发计划

## 项目概述

基于docs/agentv2.html原型，开发现代化的江苏信托智能体管控与洞察平台。

### 核心功能模块

1. **首页驾驶舱** - 经营KPI总览、实时监控
2. **智能体目录** - 智能体浏览、搜索、管理
3. **对话历史** - 历史记录查询、评分管理
4. **反馈中心** - 低分反馈处理、工单管理
5. **数据分析** - 使用指标、质量分析
6. **系统设置** - 合规配置、安全管理

## 技术架构选型

### 前端技术栈
- **框架**: React 18 + TypeScript
- **构建工具**: Next.js 14 (App Router)
- **样式方案**: Tailwind CSS + HeadlessUI
- **状态管理**: Zustand
- **数据获取**: TanStack Query (React Query)
- **图表组件**: Chart.js + react-chartjs-2
- **UI组件**: 自定义组件库 + HeadlessUI
- **图标**: Heroicons

### 后端技术栈
- **数据库**: MongoDB (本地部署)
- **API**: Next.js API Routes
- **数据验证**: Zod
- **ORM**: Mongoose

## 项目目录结构

```
jsitcagent/
├── src/                        # 源代码目录
│   ├── app/                    # Next.js App Router
│   │   ├── (dashboard)/        # 仪表盘路由组
│   │   │   ├── page.tsx        # 首页
│   │   │   ├── agents/         # 智能体目录
│   │   │   ├── history/        # 对话历史
│   │   │   ├── feedback/       # 反馈中心
│   │   │   ├── analytics/      # 数据分析
│   │   │   └── settings/       # 系统设置
│   │   ├── api/                # API路由
│   │   ├── globals.css         # 全局样式
│   │   └── layout.tsx          # 根布局
│   ├── components/             # 共享组件
│   │   ├── ui/                 # 基础UI组件
│   │   ├── charts/             # 图表组件
│   │   ├── layout/             # 布局组件
│   │   └── features/           # 功能组件
│   ├── lib/                    # 工具库
│   │   ├── utils.ts            # 通用工具
│   │   ├── mongodb.ts          # 数据库连接
│   │   └── validations.ts      # 数据验证
│   ├── stores/                 # 状态管理
│   ├── types/                  # TypeScript类型定义
│   └── styles/                 # 样式文件
├── public/                     # 静态资源
├── docs/                       # 项目文档
├── package.json                # 项目配置
├── tailwind.config.js          # Tailwind配置
├── next.config.js              # Next.js配置
└── tsconfig.json              # TypeScript配置
```

## 开发阶段规划

### 第一阶段：项目基础搭建 (当前阶段)
- [x] 分析原型并制定开发计划
- [ ] 初始化Next.js项目和依赖
- [ ] 配置TypeScript、Tailwind CSS、ESLint
- [ ] 创建基础组件库和工具函数
- [ ] 搭建主布局和导航结构

### 第二阶段：核心页面开发
- [ ] 实现首页驾驶舱
  - [ ] KPI统计卡片
  - [ ] Top智能体列表
  - [ ] 实时动态Feed
  - [ ] 系统健康监控
- [ ] 实现智能体目录页面
  - [ ] 搜索和筛选功能
  - [ ] 智能体卡片展示
  - [ ] 分页和排序

### 第三阶段：详情和交互功能
- [ ] 智能体详情弹窗
  - [ ] 概览、对话、评分等标签页
  - [ ] 评分交互功能
- [ ] 对话历史页面
  - [ ] 历史记录查询
  - [ ] 评分管理
  - [ ] 导出功能

### 第四阶段：分析和管理功能
- [ ] 反馈中心页面
- [ ] 数据分析页面
- [ ] 系统设置页面
- [ ] 图表可视化

### 第五阶段：优化和完善
- [ ] 性能优化
- [ ] 响应式适配
- [ ] 错误处理
- [ ] 数据持久化
- [ ] 测试和文档

## 数据模型设计

### Agent (智能体)
```typescript
interface Agent {
  id: string
  name: string
  dept: string
  owner: string
  status: 'published' | 'beta' | 'draft'
  model: string
  rating: number
  usage: number
  cost: number
  tags: string[]
  description: string
  versions: Version[]
  config: AgentConfig
  dialogs: Dialog[]
}
```

### Dialog (对话记录)
```typescript
interface Dialog {
  id: string
  agentId: string
  question: string
  answer: string
  timestamp: string
  rating?: number
  feedback?: string
}
```

### Analytics (分析数据)
```typescript
interface Analytics {
  activeAgents: number
  weeklySessions: number
  averageRating: number
  resolutionRate: number
  costTrend: number[]
  usageTrend: number[]
}
```

## 开发注意事项

1. **代码规范**
   - 所有组件使用TypeScript严格模式
   - 使用函数式组件和Hooks
   - 遵循单一职责原则
   - 代码注释使用中文

2. **性能优化**
   - 使用React.memo防止不必要重渲染
   - 大列表使用虚拟滚动
   - 图片懒加载
   - 代码分割和动态导入

3. **用户体验**
   - 加载状态和骨架屏
   - 错误边界和友好错误提示
   - 响应式设计，支持移动端
   - 无障碍支持

4. **数据管理**
   - UI与数据完全解耦
   - 使用TanStack Query缓存策略
   - 乐观更新提升体验
   - 错误重试机制

## 当前开发状态

- ✅ 项目分析和计划制定
- 🔄 准备开始第一阶段开发
- ⏳ 等待项目初始化

## 下一步行动

1. 初始化Next.js项目
2. 安装和配置所需依赖
3. 创建基础目录结构
4. 实现主布局组件

---

*最后更新: 2025-01-27*
